# AAHYWEH
# Control file for L2 (input) to L3 (output) quality control.
#
# TEMPLATE VERSION
#  To convert this template to a version that works for data output by the standard OzFlux
#  data logger program:
#   1) Replace the following place holders with values for your site:
#      <site_name> - the name of the site
#      <year>      - the year of the data
#      <latitude>  - the latitude of the site, decimal degrees
#      <longitude> - the longitude of the site, decimal degrees
#      <height>    - the height of the measurement (above ground), m
#      <depth>     - the depth of the measurement (below ground), cm for depths <= 1m, m for depths > 1m
#      <letter>    - the letter used to distinguish sensors at the same depth or height
#   2) Replace the default quality control limits (eg Lower, Upper etc) with site-specific values.
#
# DESCRIPTION OF CONTROL FILE SECTIONS

# [Files]     - contains paths and file names

# [General]   - general settings
#    PlotWidth               = 10.7          # default plot width, inches
#    PlotHeight              = 8             # default plot height, inches
#    zms                     = <height>      # height of EC instruments above the surface, m
# [Files]     - contains paths and file names
# [Options]   - specify processing options
#             - the following 2 switches must be present with one of the 2 possible values indicated
#    CO2Units                = umol/mol      # 'mg/m3' or 'umol/mol', units for Cc
#    FcUnits                 = umol/m2/s     # 'mg/m2/s' or 'umol/m2/s', units for Fc
#             - the following switches control processing options
#               - defaults as indicated, options are listed after the # symbol
#               - default values are used if these switches are not present
#    UseL2Fluxes             = No            # Yes/No, use fluxes from L2 file, do not calculate fluxes from covariances
#    2DCoordRotation         = Yes           # Yes/No, apply the 2D coordinate rotation
#    MassmanCorrection       = No            # Yes/No, apply the Massman correction
#    ApplyFcStorage          = No            # Yes/No, correct Fc for storage, single point
#    CorrectIndividualFg     = No            # Yes/No, correct individual Fg for storage or correct average Fg
#    CorrectFgForStorage     = Yes           # Yes/No, correct Fg for storage in soil column above sensor
#    CoordinateFluxGaps      = No            # Yes/No, remove Fh and Fe when Fc missing and vice versa
#    CoordinateAh7500&FcGaps = No            # Yes/No, remove Fc data when any Li-7500 missing and vice versa
#             - the following switches are for advanced users only
#    RelaxRotation           = No            # Yes/No, replace missing rotated covariance with unrotated if good
#    RelaxFgStorage          = No            # Yes/No, replace missing Fg corrected for storage with uncorrected if good
#    RelaxFeWPL              = No            # Yes/No, replace missing Fe corrected for WPL with uncorrected if good
#    RelaxFhvtoFh            = No            # Yes/No, replace missing Fh with Fhv if good
#    DisableFeWPL            = No            # Yes/No, diable the WPL correction for Fe
#    DisableFcWPL            = No            # Yes/No, diable the WPL correction for Fc
# [Output]    - specify the variables to be written to the output file
#               - 2 output list can be specified:
#                 - "xl" defines which variables will be written to the Excel file output at L3
#                 - "nc" defines which variables will be written to the netCDF file output at L3
#               - if no list is specified, all variables are written out
# [Soil]      - constants used in correcting Fg for storage
# [Variables] - variable names and quality control keys, only those variables
#               corrected or calculated at this level need to be specified in
#               this control file.
#               Valid quality control sections are:
#                RangeCheck   - reject data less than "Lower" or greater than "Upper"
#                DiurnalCheck - reject data outside Avg(H.h)+/-NumSd*Stdev(H.h) where
#                                Avg(H.h) is the average of all data at time H.h and
#                                Stdev(H.h) is the standard deviation of all data at time H.h
#                                 eg H.h = 8.5 is 0830
#                 NOTE: The "Lower", "Upper" and "NumSd" keywords require a value for each
#                       month of the year (12).  This can be written in shorthand as:
#                        eg "[100]*12" (same value for each month)
#                       or in longhand as:
#                        eg "[100,110,120,130,140,150,150,140,130,120,110,100]" (different each month)
#                  [[[RangeCheck]]]
#                      Lower      = "[-100]*12"
#                      Upper      = "[600]*12"
#                  [[[DiurnalCheck]]]
#                      NumSd      = "[3]*12"
#                ExcludeDates - reject data between specified dates, multiple date ranges can be
#                               specified on separate lines but the lines must be numbered
#                               sequentially from 0 (eg 0, 1, 2 etc)
#                 NOTE: The date range is specified as:
#                        eg "['2010-1-1 00:00','2010-9-16 00:00']"
#                ExcludeHours - reject data at specified times between the specified date range,
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range and hours to be rejected are specified as:
#                        eg "['2008-04-22 00:00','2008-07-26 23:30',['09:30','10:00','10:30']]"
#                Linear       - apply a linear correction to the data within a date range,
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range, slope and offset are specified as:
#                        eg "['2010-01-01 00:00','2011-01-01 00:00',1.0,0.0]"
#                Correction   - apply an offset to a wind direction measurement to correct for alignment
#                               multiple ranges can be specified on separate lines but the
#                               lines must be numbered sequentially from 0 (eg 0, 1, 2, etc)
#                 NOTE: The date range and correction are specified as follows:
#                        eg "['2009-1-1 00:00','2010-1-1 00:00',180]"
# [Plots]     - definition of time series plots
#    # subsection that defines a collection of plots on a single page
#    [[1]]
#        # title for the page, required
#        Title     = "Radiative fluxes"
#        # list of series to be plotted, required
#        Variables = "['Fsd','Fsu','Fld','Flu','Fn_NR']"
#        # Y axis minimum limits for left time series axis, optional, must be a number or 'Auto'
#        YLMin     = "['Auto',   0 , 250 , 250 ,'Auto']"
#        # Y axis maximum limits for left time series axis, optional, must be a number or 'Auto'
#        YLMax     = "['Auto', 300 , 600 , 600 ,'Auto']"
#        # Y axis minimum limits for right time series axis, optional, must be a number or 'Auto'
#        YRMin     = "[   0 ,   0 , 250 , 250 ,  -150 ]"
#        # Y axis maximum limits for right time series axis, optional, must be a number or 'Auto'
#        YRMax     = "[1200 , 300 , 600 , 600 ,   600 ]"
#
[General]
    zms = 15           # Li-7500 height above surface (m) used to calculate Fc storage

[Files]
    file_path = ../Sites/Gingin/Data/Processed/All_Years/
    in_filename = Gingin_All_L2.nc
    out_filename = Gingin_All_L3.nc

[Options]
    CO2Units                = umol/mol      # 'mg/m3' or 'umol/mol', units for Cc
    FcUnits                 = umol/m2/s     # 'mg/m2/s' or 'umol/m2/s', units for Fc

[Output]
    #xl = "['Ah','Cc','eta','Fa','Fc','Fe','Fg','Fg_Av','Fh','Fld','Flu','Fm','Fn','Fsd','Fsu','Precip','ps','Sws','Ta','theta','Ts','ustar','Ws','Wd']"
    #nc = "['Ah','Cc','eta','Fa','Fc','Fe','Fg','Fg_Av','Fh','Fld','Flu','Fm','Fn','Fsd','Fsu','Precip','ps','Sws','Ta','theta','Ts','ustar','Ws','Wd']"

[Soil]
    FgDepth = 0.08               # depth of heat flux plates, m
    BulkDensity = 1367           # bulk density of soil, kg/m3				# RPS 22/3/2017 modified from 1466
    OrganicContent = 0.0023      # organic content of soil, fraction between 0 and 1
    SwsDefault = 0.04            # default value for soil moisture
    SwsSeries = "['Sws_10cm']"  # soil moisture series to use when calculating soil heat capacity

#[Massman]
# TEST ONLY - values for Gingin
#  zmd = 10.7          # instrument height above displacement plane, d = 2 / 3 * h = 4.3, h = 6.5, z = 15 m
#  z0 = 0.6            # roughness length from Brutseart 1982, eqn 5.7: h / z = 3 * e
#  angle = 25          # angle between CSAT3 mounting point and IRGA sensor head mid-path
#  CSATarm = 0.33      # distance from CSAT mounting point to CSAT sensor
#  IRGAarm = 0.25      # distance from CSAT mounting point to IRGA sensor
#    # TEST ONLY - values for Alice Springs Mulga
#    zmd = 7.3           # instrument height above displacement plane, d = 2 / 3 * h = 4.3, h = 6.5, z = 11.635 m
#    z0 = 0.8            # roughness length from Brutseart 1982, eqn 5.7: h / z = 3 * e
#    angle = 16          # angle between CSAT3 mounting point and IRGA sensor head mid-path
#    CSATarm = 0.475     # distance from CSAT mounting point to CSAT sensor
#    IRGAarm = 0.315     # distance from CSAT mounting point to IRGA sensor

[Variables]
# Radiation
    [[Fn]]
        [[[MergeSeries]]]
            Source     = "['Fn_KZ','Fn_NR']"  							#TL removed reference to Fn_NR in merge series # RPS put it back 22/3/2017
        [[[RangeCheck]]]
            Lower      = [-150]*12
            Upper      = [1100]*12
# H2O covariances
    [[UzA]]
        [[[Linear]]]
            0      = "['2011-11-08 00:00','2017-01-01 00:00',1.0,0.0]"
    [[UxA]]
        [[[Linear]]]
            0      = "['2011-11-08 00:00','2017-01-01 00:00',1.0,0.0]"
    [[UyA]]
        [[[Linear]]]
            0      = "['2011-11-08 00:00','2017-01-01 00:00',1.0,0.0]"
# Turbulent fluxes
    [[Fh]]
        [[[RangeCheck]]]
            Lower      = "[-100]*12"
            Upper      = "[800]*12"			#RPS changed from 600 to 800 3/9/15 following Trish 18/11/2013
    [[Fe]]
        [[[RangeCheck]]]
            Lower      = "[-100]*12"
            Upper      = "[600]*12"         # RPS maybe should be lower, 450
    [[Fc]]
    # units are umol/m2/s
        [[[RangeCheck]]]
            Lower      = "[-50]*12"
            Upper      = "[50]*12"
    [[Fm]]
        [[[RangeCheck]]]
            Lower      = "[-1]*12"			#TL had set this at -3 
            Upper      = "[1]*12"			#TL had set this at 3
    [[ustar]]
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[2]*12"
# Meteorological
    [[Cc_7500_Av]]
        [[[Linear]]]
            0      = "['2011-11-08 00:00','2017-01-01 00:00',1.0,0.0]"
    [[Ah_7500_Av]]
        [[[Linear]]]
            0      = "['2011-11-08 00:00','2017-01-01 00:00',1.0,0.0]"
    [[Ta]]
        [[[MergeSeries]]]
            Source     = "['Ta_HMP_15m','Ta_HMP_10m','Ta_HMP_7m','Ta_HMP_4m','Ta_HMP_2m','Ta_CSAT']"      	#EA 4/2/16 added Ta_HMP_10m, Ta_HMP_7m, Ta_HMP_4m
        [[[RangeCheck]]]
            Lower      = [0]*12
            Upper      = [50]*12
    [[Ah]]
        [[[MergeSeries]]]
             Source     = "['Ah_HMP_15m','Ah_HMP_10m','Ah_HMP_7m','Ah_HMP_4m','Ah_HMP_2m','Ah_7500_Av']"         #EA 4/2/16 added Ah_HMP_10m, Ah_HMP_7m, Ah_HMP_4m
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = [35]*12
# Meteorology: CO2 concentration
    [[Cc]]
    # units are umol/mol
        [[[MergeSeries]]]
            Source     = "['Cc_7500_Av']"
            standard_name = "not defined"
        [[[RangeCheck]]]
            Lower      = "[250]*12"
            Upper      = "[900]*12"
# Meteorology: Wind speed
    [[Ws]]
        [[[MergeSeries]]]
           Source     = "['Ws_WS4_16m','Ws_WS4_10m','Ws_WS4_7m','Ws_WS4_2m','Ws_CSAT']"          #EA 4/2/16 added Ws_WS4_10m, Ws_WS4_7m, Ws_WS4_2m and changed Ws_WS4 to Ws_WS4_16m.
            standard_name = "not defined"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[30]*12"
# Meteorology: Wind direction
    [[Wd]]
        [[[MergeSeries]]]
           Source     = "['Wd_WS4_16m','Wd_WS4_10m','Wd_WS4_7m','Wd_WS4_2m','Wd_CSAT']"          #EA 4/2/16 added Wd_WS4_10m, Wd_WS4_7m, Wd_WS4_2m and changed Wd_WS4 to Wd_WS4_16m.
            standard_name = "not defined"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[360]*12"
    [[Fg]]
        [[[AverageSeries]]]
            Source     = "['Fg_8cma','Fg_8cmb','Fg_8cmc']"
        [[[RangeCheck]]]
            Lower      = "[-100]*12"								#TL 18/11/2013 changed from +/- 300
            Upper      = "[300]*12"
			
	[[Shf]]	
		[[[AverageSeries]]]
            Source     = "['Shf_8cma_Avg','Shf_8cmb_Avg','Shf_8cmc_Avg']"          #EA 4/5/16 added 
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[1000000]*12"	

# Soil: Volumetric soil water content			
    [[Sws]]
        [[[AverageSeries]]]
            Source     = "['Sws_006cm','Sws_10cma','Sws_10cmc','Sws_10cmd']"       # RPS 23/3/2017 Added 006cm  #TL 3/7/13 10cmb not used - dodgy
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.25]*12"
    [[Sws_06cm]]													#RPS 22/3/2017 added
        [[[AverageSeries]]]
            Source     = "['Sws_006cm']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.25]*12"
    [[Sws_10cm]]
        [[[AverageSeries]]]
            Source     = "['Sws_10cma','Sws_10cmc','Sws_10cmd']"       #RPS 22/3/2017 - yes, duplicates Sws currently but will make later processing easier.
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.25]*12"
    [[Sws_20cm]]													#TL 20/5/2014 added
        [[[AverageSeries]]]
            Source     = "['Sws_20cma','Sws_20cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
    [[Sws_40cm]]													#TL 20/5/2014 added
        [[[AverageSeries]]]
            Source     = "['Sws_40cma','Sws_40cmb','Sws_40cmc','Sws_40cmd']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
     [[Sws_80cm]]													#TL 20/5/2014 added
        [[[AverageSeries]]]
            Source     = "['Sws_80cma','Sws_80cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
      [[Sws_160cm]]													#TL 20/5/2014 added
        [[[AverageSeries]]]
            Source     = "['Sws_160cma','Sws_160cmb','Sws_160cmc','Sws_160cmd']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
      [[Sws_200cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Sws_200cma']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
      [[Sws_400cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Sws_400cma','Sws_400cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"
      [[Sws_600cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Sws_600cma','Sws_600cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[0.2]*12"	
			
      [[Swp_10cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Swp_10cma','Swp_10cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"									# EA added 13/4/16
            Upper      = "[3000]*12"								# EA added 13/4/16 (test)
      [[Swp_40cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Swp_40cma','Swp_40cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"									# EA added 13/4/16
            Upper      = "[3000]*12"								# EA added 13/4/16 (test)
      [[Swp_80cm]]													# EA 4/2/2016 added
        [[[AverageSeries]]]
            Source     = "['Swp_80cma','Swp_80cmb']"       
        [[[RangeCheck]]]
            Lower      = "[0]*12"									# EA added 13/4/16
            Upper      = "[3000]*12"								# EA added 13/4/16 (test)	

# Soil: Soil temperature
    [[Ts]]
        [[[AverageSeries]]]
            Source     = "['Ts_4cma','Ts_4cmb','Ts_4cmc','Ts_4cmd']"     # EA 16/3/16 changed Ts_10cma to Ts_4cma. Added Ts_4cmb, Ts_4cmc, Ts_4cmd

			
#    [[Ts]]                                                              #EA 4/2/2016 commented out
#        [[[AverageSeries]]]
#            Source     = "['Ts_10cma']"
#        [[[RangeCheck]]]
#            Lower      = "[0]*12"
#            Upper      = "[50]*12"
#     [[Ts_TCAV_4cm]]													#EA 4/2/2016 added	#EA 8/4/2016 commented out (merge TCAV_4cm and T108_4cm)		
#        [[[AverageSeries]]]
#            Source     = "['Ts_TCAV_4cma','Ts_TCAV_4cmb']"        
#        [[[RangeCheck]]]
#            Lower      = "[0]*12"
#            Upper      = "[50]*12"
#     [[Ts_T108_4cm]]													#EA 4/2/2016 added	#EA 8/4/2016 commented out (merge TCAV_4cm and T108_4cm)		
#        [[[AverageSeries]]]
#            Source     = "['Ts_T108_4cma','Ts_T108_4cmb']"
#        [[[RangeCheck]]]
#            Lower      = "[0]*12"
#            Upper      = "[50]*12"	
	[[Ts_4cm]]														    #EA 8/4/16 added			
        [[[AverageSeries]]]
            Source     = "['Ts_4cma','Ts_4cmb','Ts_4cmc','Ts_4cmd']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"			
	[[Ts_6cm]]														    #RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['Ts_CS650_006cm']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"			
     [[Ts_10cm]]														#EA 4/2/2016 added			
        [[[AverageSeries]]]
            Source     = "['Ts_T108_10cma','Ts_T108_10cmb']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"	
     [[Ts_20cm]]														#EA 4/2/2016 added			
        [[[AverageSeries]]]
            Source     = "['Ts_T108_20cma','Ts_T108_20cmb']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"	
     [[Ts_40cm]]														#EA 4/2/2016 added			
        [[[AverageSeries]]]
            Source     = "['Ts_T108_40cma','Ts_T108_40cmb']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"
     [[Ts_200cm]]														#RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['Ts_CS650_200cm1']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"	
     [[Ts_400cm]]														#RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['Ts_CS650_400cm1','Ts_CS650_400cm2']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"
     [[Ts_600cm]]														#RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['Ts_CS650_600cm1','Ts_CS650_600cm2']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[50]*12"	
# Soil: Soil Electrical Conductivity
	[[EC_06cm]]														    #RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['EC_CS650_006cm']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[3]*12"			
	[[EC_200cm]]														    #RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['EC_CS650_200cma']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[3]*12"			
	[[EC_400cm]]														    #RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['EC_CS650_400cma','EC_CS650_400cmb']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[3]*12"			
	[[EC_600cm]]														    #RPS 22/3/2017 added			
        [[[AverageSeries]]]
            Source     = "['EC_CS650_600cma','EC_CS650_600cmb']"
        [[[RangeCheck]]]
            Lower      = "[0]*12"
            Upper      = "[3]*12"			

[Plots]
    [[1]]
        Title = "Radiative fluxes - 2011-2017"
        Variables = "['Fsd','Fsu','Fld','Flu','Fn']"
    [[2]]
        Title = "Turbulent fluxes - 2011-2017"
        Variables = "['Fh','Fe','Fc','ustar','Fm']"
    [[3]]
        Title = "Fh diagnostics - 2011-2017"
        Variables = "['Fh','UzT','Diag_CSAT','Diag_7500','AGC_7500','Ah_7500_Sd','Cc_7500_Sd']"
    [[4]]
        Title = "Fe diagnostics - 2011-2017"
        Variables = "['Fe','UzA','Diag_CSAT','Diag_7500','AGC_7500','Ah_7500_Sd','Cc_7500_Sd']"
    [[5]]
        Title = "Fc diagnostics - 2011-2017"
        Variables = "['Fc','UzC','Diag_CSAT','Diag_7500','AGC_7500','Ah_7500_Sd','Cc_7500_Sd']"
    [[6]]
        Title = "Air temperature, humidity and CO2 - 2011-2017"
        Variables = "['Ta','Ta_HMP_15m','Ta_HMP_2m','Ah','Ah_HMP_15m','Ah_HMP_2m','Cc_7500_Av']"
    [[7]]
        Title = "Soil temperature, water content and heat flux - 2011-2017"
        Variables = "['Precip','Ts','Sws','Sws_10cma','Sws_10cmc','Sws_10cmd','Fg']"
    [[8]]
        Title = "Pressure, wind speed and direction - 2011-2017"
        Variables = "['ps','Ws','Ux','Uy','Uz','Wd']"
    [[9]]
        Title = "Soil Moisture - 2011-2017"
        Variables = "['Sws_160cm','Sws_80cm','Sws_40cm','Sws_20cm','Sws','Precip']"
    [[10]]
        Title = "Soil water content, potential and rain - 2011-2017"						#EA added 13/4/16 to compare swp and swc
        Variables = "['Sws_80cm','Swp_80cm','Sws_40cm','Swp_40cm','Sws','Swp_10cm','Precip']"

